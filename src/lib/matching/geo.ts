/**
 * ZIP3 Geo-Distance Matching
 *
 * Uses approximate centroids for 3-digit ZIP prefix areas (967 regions) to
 * compute Haversine distance-based proximity scores between attorneys and cases.
 * No external packages required — pure static data + math.
 */

// Approximate centroids for US 3-digit ZIP prefix areas.
// Format: "NNN" => [latitude, longitude]
// Coverage: all 50 states + DC + territories
export const ZIP3_CENTROIDS: Record<string, [number, number]> = {
  // New England
  "010": [42.07, -72.62], "011": [42.10, -72.59], "012": [42.45, -73.23],
  "013": [42.28, -72.40], "014": [42.57, -71.80], "015": [42.54, -71.97],
  "016": [42.37, -71.59], "017": [42.41, -71.73], "018": [42.54, -70.99],
  "019": [42.62, -70.90], "020": [42.04, -71.28], "021": [42.40, -71.11],
  "022": [42.36, -71.07], "023": [41.99, -70.78], "024": [41.82, -70.13],
  "025": [41.68, -69.96], "026": [41.77, -70.59], "027": [41.52, -70.62],
  "028": [41.49, -71.35], "029": [41.44, -71.44],
  // Rhode Island & CT
  "060": [41.86, -72.60], "061": [41.73, -72.66], "062": [41.57, -72.66],
  "063": [41.49, -72.44], "064": [41.45, -72.26], "065": [41.33, -72.40],
  "066": [41.15, -73.29], "067": [41.60, -73.06], "068": [41.04, -73.54],
  "069": [41.20, -73.46],
  // New York
  "100": [40.73, -73.99], "101": [40.75, -73.99], "102": [40.75, -74.00],
  "103": [40.62, -74.01], "104": [40.67, -73.95], "105": [41.03, -73.76],
  "106": [41.15, -73.77], "107": [41.24, -73.87], "108": [40.97, -73.79],
  "109": [41.38, -74.21], "110": [40.75, -73.85], "111": [40.71, -73.80],
  "112": [40.65, -73.94], "113": [40.59, -73.74], "114": [40.72, -73.82],
  "115": [40.73, -73.77], "116": [40.66, -73.73], "117": [40.75, -73.76],
  "118": [40.81, -73.65], "119": [40.92, -73.41],
  "120": [42.65, -73.75], "121": [42.91, -73.79], "122": [42.82, -73.93],
  "123": [42.82, -74.03], "124": [41.70, -74.09], "125": [41.64, -73.97],
  "126": [41.53, -74.00], "127": [41.51, -74.23], "128": [41.95, -74.67],
  "129": [42.38, -75.12], "130": [43.05, -76.15], "131": [43.22, -76.33],
  "132": [43.03, -75.85], "133": [42.78, -75.48], "134": [42.55, -75.41],
  "135": [42.79, -75.18], "136": [42.47, -74.78], "137": [42.09, -75.36],
  "138": [43.10, -76.49], "139": [43.22, -75.33], "140": [42.88, -78.89],
  "141": [42.74, -78.85], "142": [42.90, -78.74], "143": [43.07, -79.07],
  "144": [43.16, -77.60], "145": [42.74, -77.98], "146": [43.16, -78.70],
  "147": [42.09, -79.23], "148": [42.44, -76.50], "149": [42.10, -77.05],
  // New Jersey
  "070": [40.73, -74.17], "071": [40.88, -74.17], "072": [40.69, -74.24],
  "073": [40.80, -74.16], "074": [40.89, -74.04], "075": [40.60, -74.24],
  "076": [40.50, -74.33], "077": [40.33, -74.39], "078": [40.73, -74.45],
  "079": [40.85, -74.53], "080": [39.94, -75.12], "081": [39.94, -75.02],
  "082": [39.76, -75.08], "083": [39.70, -74.93], "084": [39.99, -74.82],
  "085": [40.29, -74.69], "086": [40.20, -74.74], "087": [40.12, -74.75],
  "088": [40.01, -74.78], "089": [40.45, -74.83],
  // Pennsylvania
  "150": [40.44, -79.99], "151": [40.43, -79.95], "152": [40.34, -79.85],
  "153": [40.07, -79.79], "154": [40.25, -80.23], "155": [40.34, -79.54],
  "156": [40.61, -79.84], "157": [41.00, -80.12], "158": [40.69, -80.05],
  "159": [40.53, -79.26], "160": [40.38, -78.92], "161": [40.81, -78.65],
  "162": [40.72, -78.10], "163": [41.41, -79.83], "164": [41.26, -80.46],
  "165": [41.38, -79.54], "166": [41.70, -78.97], "167": [41.74, -79.65],
  "168": [41.39, -78.37], "169": [41.12, -77.44], "170": [40.27, -76.88],
  "171": [40.26, -76.92], "172": [40.05, -77.51], "173": [40.79, -77.95],
  "174": [40.60, -77.60], "175": [40.40, -76.35], "176": [40.17, -76.14],
  "177": [41.15, -76.95], "178": [40.97, -76.54], "179": [41.33, -75.97],
  "180": [40.70, -75.22], "181": [40.62, -75.46], "182": [40.96, -75.97],
  "183": [40.89, -75.34], "184": [41.08, -75.27], "185": [41.13, -75.37],
  "186": [41.26, -75.88], "187": [41.16, -75.81], "188": [41.32, -75.73],
  "189": [41.53, -75.55], "190": [40.07, -75.44], "191": [39.95, -75.17],
  "192": [40.05, -75.06], "193": [39.84, -75.44], "194": [40.03, -75.35],
  "195": [40.21, -74.98], "196": [40.13, -75.24],
  // Delaware & Maryland
  "197": [39.74, -75.55], "198": [39.73, -75.54], "199": [39.66, -75.62],
  "200": [38.90, -77.04], "201": [38.97, -77.08], "202": [38.90, -77.03],
  "203": [39.10, -77.16], "204": [38.98, -77.09], "205": [38.94, -77.10],
  "206": [38.99, -76.89], "207": [38.99, -76.89], "208": [38.99, -76.89],
  "209": [38.66, -76.59], "210": [39.29, -76.61], "211": [39.29, -76.61],
  "212": [39.29, -76.61], "214": [39.46, -76.68], "215": [39.56, -77.15],
  "216": [39.64, -77.72], "217": [38.99, -77.47], "218": [39.73, -79.01],
  "219": [39.38, -76.45],
  // Virginia & DC
  "220": [38.87, -77.17], "221": [38.82, -77.32], "222": [38.84, -77.09],
  "223": [38.80, -77.17], "224": [37.54, -77.43], "225": [37.27, -79.94],
  "226": [38.15, -79.07], "227": [37.44, -77.60], "228": [37.43, -79.24],
  "229": [38.05, -78.49], "230": [36.85, -76.29], "231": [36.95, -76.41],
  "232": [36.87, -76.22], "233": [36.87, -76.29], "234": [36.90, -76.19],
  "235": [36.76, -76.01], "236": [36.63, -76.96], "237": [36.84, -76.05],
  "238": [37.44, -77.43], "239": [37.44, -77.43], "240": [37.33, -80.05],
  "241": [37.27, -80.00], "242": [36.94, -79.39], "243": [37.78, -81.19],
  "244": [37.77, -79.45], "245": [37.94, -78.89], "246": [37.18, -80.41],
  // West Virginia & NC
  "247": [38.35, -82.16], "248": [38.08, -81.23], "249": [37.78, -81.19],
  "250": [38.35, -81.63], "251": [38.35, -81.63], "252": [38.35, -81.63],
  "253": [38.35, -81.63], "254": [38.35, -81.63], "255": [39.34, -79.97],
  "256": [39.17, -79.88], "257": [39.17, -79.88], "258": [38.99, -79.96],
  "259": [38.14, -79.71], "260": [39.47, -77.42], "261": [39.47, -77.42],
  "262": [39.31, -77.52], "263": [38.32, -81.33], "264": [38.86, -82.10],
  "265": [38.41, -82.44], "266": [38.51, -82.65], "267": [38.56, -78.58],
  "268": [38.97, -80.14],
  // NC
  "270": [36.07, -79.79], "271": [36.10, -80.24], "272": [35.23, -80.85],
  "273": [35.89, -78.78], "274": [35.56, -78.34], "275": [35.77, -78.65],
  "276": [35.85, -78.72], "277": [35.77, -78.64], "278": [35.39, -79.55],
  "279": [35.76, -80.00], "280": [35.23, -80.64], "281": [35.30, -80.81],
  "282": [35.37, -82.21], "283": [35.19, -81.51], "284": [34.92, -76.91],
  "285": [35.36, -77.42], "286": [35.09, -80.97], "287": [35.10, -80.97],
  "288": [35.93, -77.80], "289": [34.20, -77.93],
  // South Carolina
  "290": [34.00, -81.04], "291": [34.00, -81.04], "292": [34.00, -81.04],
  "293": [34.73, -82.42], "294": [33.68, -78.89], "295": [34.19, -79.80],
  "296": [34.85, -82.40], "297": [35.09, -81.95], "298": [33.43, -82.17],
  "299": [32.10, -81.22],
  // Georgia
  "300": [33.75, -84.39], "301": [33.75, -84.39], "302": [33.75, -84.39],
  "303": [33.75, -84.50], "304": [33.70, -84.38], "305": [33.83, -84.37],
  "306": [33.45, -84.39], "307": [34.24, -84.78], "308": [30.82, -83.28],
  "309": [31.43, -83.50], "310": [32.08, -81.10], "311": [32.08, -81.10],
  "312": [33.55, -83.44], "313": [32.08, -81.10], "314": [32.08, -81.10],
  "315": [31.59, -84.18], "316": [30.85, -83.29], "317": [34.32, -83.82],
  "318": [33.95, -83.38], "319": [33.93, -83.44],
  // Florida
  "320": [30.33, -81.66], "321": [28.55, -81.38], "322": [29.65, -82.33],
  "323": [30.44, -84.28], "324": [30.22, -85.68], "325": [29.89, -85.31],
  "326": [29.94, -82.75], "327": [28.55, -81.38], "328": [28.55, -81.38],
  "329": [27.97, -82.47], "330": [25.77, -80.20], "331": [25.77, -80.20],
  "332": [25.77, -80.20], "333": [26.12, -80.14], "334": [27.33, -82.53],
  "335": [27.97, -82.47], "336": [28.03, -81.72], "337": [27.97, -82.54],
  "338": [28.03, -82.48], "339": [26.66, -80.03], "340": [24.56, -81.78],
  "341": [26.14, -81.80], "342": [26.64, -80.20], "344": [26.64, -81.87],
  "346": [27.87, -82.53], "347": [28.81, -81.28], "349": [26.55, -81.94],
  // Alabama & Mississippi
  "350": [33.52, -86.80], "351": [33.52, -86.80], "352": [33.52, -86.80],
  "354": [33.70, -87.58], "355": [33.70, -87.58], "356": [34.73, -86.58],
  "357": [34.73, -86.58], "358": [34.17, -86.87], "359": [33.21, -87.57],
  "360": [32.36, -86.30], "361": [32.36, -86.30], "362": [33.24, -87.28],
  "363": [31.56, -85.40], "364": [31.37, -85.60], "365": [30.69, -88.04],
  "366": [30.69, -88.04], "367": [32.31, -88.09], "368": [31.36, -88.53],
  "369": [30.36, -89.09],
  // Tennessee
  "370": [36.17, -86.78], "371": [36.17, -86.78], "372": [36.15, -86.82],
  "373": [35.15, -90.05], "374": [35.99, -83.92], "375": [35.21, -89.99],
  "376": [35.04, -85.31], "377": [35.08, -85.28], "378": [35.99, -83.98],
  "379": [35.49, -87.07], "380": [35.15, -90.05], "381": [35.57, -88.81],
  "382": [36.17, -88.08], "383": [35.92, -88.76], "384": [35.59, -88.81],
  "385": [35.88, -84.51],
  // Kentucky
  "400": [38.25, -85.76], "401": [38.25, -85.76], "402": [38.25, -85.76],
  "403": [38.04, -84.50], "404": [38.04, -84.50], "405": [38.04, -84.50],
  "406": [37.69, -85.88], "407": [37.37, -83.47], "408": [37.76, -84.28],
  "409": [37.56, -83.37], "410": [39.10, -84.51], "411": [37.48, -82.72],
  "412": [37.48, -82.72], "413": [37.35, -82.35], "414": [37.71, -87.23],
  "415": [37.34, -82.73], "416": [37.11, -83.78], "417": [36.73, -83.79],
  "418": [36.85, -84.29],
  // Ohio
  "430": [39.96, -82.99], "431": [39.96, -82.99], "432": [39.96, -82.99],
  "433": [40.09, -82.68], "434": [41.66, -83.55], "435": [41.66, -83.55],
  "436": [41.66, -83.55], "437": [41.06, -81.52], "438": [40.99, -81.37],
  "439": [40.08, -81.60], "440": [41.50, -81.69], "441": [41.50, -81.69],
  "442": [41.19, -81.35], "443": [41.14, -81.86], "444": [41.11, -80.67],
  "445": [41.11, -80.67], "446": [41.49, -82.00], "447": [40.94, -82.42],
  "448": [41.04, -83.65], "449": [40.22, -82.63], "450": [39.10, -84.51],
  "451": [39.10, -84.51], "452": [39.10, -84.51], "453": [39.76, -84.19],
  "454": [39.76, -84.19], "455": [40.04, -83.03], "456": [40.69, -83.12],
  "457": [39.96, -83.00], "458": [39.56, -83.44],
  // Indiana
  "460": [39.77, -86.16], "461": [39.77, -86.16], "462": [39.77, -86.16],
  "463": [41.68, -86.25], "464": [41.68, -86.25], "465": [41.08, -85.14],
  "466": [41.08, -85.14], "467": [41.08, -85.14], "468": [39.60, -86.25],
  "469": [40.49, -86.14], "470": [39.77, -85.07], "471": [38.21, -85.90],
  "472": [40.19, -85.39], "473": [40.19, -85.39], "474": [38.68, -87.54],
  "475": [39.47, -87.41], "476": [37.97, -87.57], "477": [37.97, -87.57],
  "478": [40.41, -86.88], "479": [41.13, -84.99],
  // Michigan
  "480": [42.33, -83.05], "481": [42.33, -83.05], "482": [42.33, -83.05],
  "483": [42.33, -83.64], "484": [42.13, -83.30], "485": [41.91, -83.39],
  "486": [43.59, -83.89], "487": [43.59, -83.89], "488": [42.73, -84.55],
  "489": [42.73, -84.55], "490": [42.01, -86.23], "491": [42.01, -86.23],
  "492": [42.88, -85.68], "493": [42.96, -84.15], "494": [43.79, -85.49],
  "495": [44.28, -84.50], "496": [45.42, -84.71], "497": [46.32, -84.33],
  "498": [46.55, -87.40], "499": [45.83, -88.07],
  // Wisconsin
  "530": [43.04, -88.09], "531": [43.04, -88.09], "532": [43.04, -88.09],
  "534": [43.04, -88.09], "535": [43.74, -87.71], "537": [43.07, -89.40],
  "538": [44.49, -88.00], "539": [44.97, -92.60], "540": [44.86, -91.49],
  "541": [44.51, -88.02], "542": [44.99, -89.63], "543": [44.89, -89.62],
  "544": [45.31, -90.29], "545": [45.44, -88.96], "546": [46.00, -91.41],
  "547": [44.82, -91.50], "548": [45.11, -92.74], "549": [44.46, -87.55],
  // Illinois
  "600": [41.85, -87.65], "601": [41.85, -87.65], "602": [41.85, -87.65],
  "603": [41.85, -87.65], "604": [41.85, -87.65], "605": [41.85, -87.65],
  "606": [41.85, -87.65], "607": [41.85, -87.65], "608": [41.85, -87.65],
  "609": [42.10, -88.21], "610": [41.74, -88.15], "611": [41.86, -88.11],
  "612": [41.69, -88.34], "613": [40.88, -90.31], "614": [42.32, -88.84],
  "615": [42.26, -88.18], "616": [42.48, -89.03], "617": [41.53, -88.99],
  "618": [37.73, -89.22], "619": [37.73, -89.22], "620": [39.52, -88.90],
  "622": [38.46, -90.22], "623": [41.75, -89.70], "624": [40.69, -89.59],
  "625": [39.80, -89.65], "626": [39.80, -89.65], "627": [39.80, -89.65],
  "628": [41.10, -90.54], "629": [38.52, -89.98],
  // Missouri & Iowa
  "630": [38.63, -90.20], "631": [38.63, -90.20], "633": [38.63, -90.20],
  "634": [38.63, -90.20], "635": [37.96, -91.77], "636": [38.05, -90.60],
  "637": [37.29, -93.93], "638": [37.20, -94.49], "639": [36.60, -93.20],
  "640": [39.10, -94.58], "641": [39.10, -94.58], "644": [39.37, -94.95],
  "645": [39.09, -94.58], "646": [39.79, -95.96], "647": [38.36, -95.26],
  "648": [37.69, -97.34], "649": [36.94, -97.12], "650": [38.59, -92.10],
  "651": [38.59, -92.10], "652": [38.82, -93.79], "653": [37.36, -89.51],
  "654": [37.21, -93.29], "655": [36.89, -90.24], "656": [37.42, -93.40],
  "657": [36.81, -91.79], "658": [37.13, -92.77],
  // Iowa
  "500": [41.59, -93.62], "501": [41.59, -93.62], "502": [41.59, -93.62],
  "503": [41.59, -93.62], "504": [41.59, -93.62], "505": [42.50, -92.34],
  "506": [43.00, -93.63], "507": [43.55, -95.87], "508": [41.66, -91.53],
  "509": [41.15, -95.86], "510": [42.49, -96.40], "511": [42.49, -96.40],
  "512": [41.21, -95.85], "513": [41.95, -91.67], "514": [42.08, -91.46],
  "515": [40.77, -91.62], "516": [40.61, -94.44],
  // Minnesota
  "550": [44.95, -93.10], "551": [44.95, -93.10], "553": [44.95, -93.10],
  "554": [44.88, -93.22], "555": [44.95, -93.09], "556": [47.53, -92.53],
  "557": [47.00, -91.79], "558": [46.79, -92.10], "559": [45.56, -94.17],
  "560": [44.23, -94.00], "561": [44.34, -95.11], "562": [45.18, -94.47],
  "563": [43.97, -91.65], "564": [46.52, -95.51], "565": [46.34, -96.04],
  "566": [47.82, -96.60], "567": [46.81, -96.78],
  // North & South Dakota
  "570": [43.54, -96.73], "571": [43.54, -96.73], "572": [44.33, -100.38],
  "573": [43.99, -101.36], "574": [43.56, -96.73], "575": [45.46, -98.48],
  "576": [46.90, -98.70], "577": [44.87, -103.07],
  "580": [46.88, -96.78], "581": [46.88, -96.78], "582": [48.23, -101.29],
  "583": [47.92, -97.07], "584": [46.87, -102.79], "585": [46.83, -100.78],
  "586": [48.14, -103.62], "587": [48.28, -101.29], "588": [48.49, -101.69],
  // Nebraska & Kansas
  "680": [41.26, -96.04], "681": [41.26, -96.04], "683": [40.81, -96.68],
  "684": [40.81, -96.68], "685": [40.81, -96.68], "686": [42.06, -97.42],
  "687": [41.67, -99.89], "688": [40.93, -98.34], "689": [40.78, -99.22],
  "690": [41.64, -103.67], "691": [41.14, -100.77], "692": [40.52, -101.99],
  "693": [41.59, -101.75],
  "660": [39.10, -94.58], "661": [37.69, -97.34], "662": [38.86, -99.32],
  "664": [38.86, -99.32], "665": [37.83, -100.00], "666": [38.38, -97.95],
  "667": [37.66, -97.33], "668": [38.38, -97.95], "669": [38.38, -97.95],
  "670": [37.71, -97.34], "671": [37.71, -97.34], "672": [37.71, -97.34],
  "673": [37.83, -97.33], "674": [38.86, -99.32], "675": [38.38, -97.95],
  "676": [37.67, -97.34], "677": [38.38, -97.95], "678": [37.83, -100.00],
  "679": [39.57, -101.35],
  // Texas
  "750": [32.78, -96.80], "751": [32.78, -96.80], "752": [32.78, -96.80],
  "753": [32.78, -96.80], "754": [32.78, -96.80], "755": [32.29, -95.30],
  "756": [32.35, -95.30], "757": [33.83, -98.49], "758": [33.33, -97.32],
  "759": [32.46, -99.73], "760": [32.73, -97.33], "761": [32.73, -97.33],
  "762": [32.73, -97.33], "763": [32.73, -97.33], "764": [31.96, -97.57],
  "765": [31.55, -97.15], "766": [31.55, -97.15], "767": [31.55, -97.15],
  "768": [31.41, -99.40], "769": [31.10, -99.38], "770": [29.76, -95.37],
  "771": [29.76, -95.37], "772": [29.76, -95.37], "773": [29.76, -95.37],
  "774": [29.76, -95.37], "775": [29.76, -95.37], "776": [29.76, -95.37],
  "777": [29.76, -95.37], "778": [27.80, -97.40], "779": [28.70, -100.50],
  "780": [29.42, -98.49], "781": [29.42, -98.49], "782": [29.42, -98.49],
  "783": [29.42, -98.49], "784": [29.42, -98.49], "785": [30.27, -97.74],
  "786": [30.27, -97.74], "787": [30.27, -97.74], "788": [28.96, -99.86],
  "789": [30.33, -100.90], "790": [31.45, -100.43], "791": [32.45, -100.45],
  "792": [33.44, -100.38], "793": [33.91, -98.55], "794": [33.45, -99.73],
  "795": [32.40, -101.83], "796": [31.97, -102.08], "797": [31.85, -104.23],
  "798": [31.76, -106.49], "799": [31.76, -106.49],
  // New Mexico & Arizona
  "700": [29.96, -90.08], "701": [29.96, -90.08], "703": [30.00, -90.09],
  "704": [29.96, -90.08], "705": [30.13, -92.11], "706": [30.13, -92.11],
  "707": [30.52, -91.17], "708": [30.45, -91.18], "710": [32.51, -93.74],
  "711": [32.51, -93.74], "712": [32.51, -93.74], "713": [32.02, -93.12],
  "714": [31.76, -92.99],
  "716": [34.75, -92.29], "717": [34.75, -92.29], "718": [34.75, -92.29],
  "719": [34.75, -92.29], "720": [34.74, -92.35], "721": [35.39, -94.40],
  "722": [35.83, -90.70], "723": [34.22, -91.50], "724": [33.80, -93.06],
  "725": [34.50, -94.06], "726": [36.36, -94.21], "727": [35.99, -94.21],
  "728": [35.57, -94.59], "729": [35.24, -92.83],
  "870": [35.11, -106.61], "871": [35.11, -106.61], "872": [35.11, -106.61],
  "873": [36.74, -108.17], "874": [34.40, -106.60], "875": [33.15, -107.27],
  "877": [36.72, -105.58], "878": [32.34, -107.77], "879": [32.27, -106.75],
  "880": [32.27, -106.75], "881": [32.27, -106.75], "882": [32.27, -106.75],
  "883": [32.27, -106.75], "884": [33.39, -104.52],
  "850": [33.45, -112.07], "851": [33.45, -112.07], "852": [33.45, -112.07],
  "853": [33.45, -112.07], "854": [33.45, -112.07], "855": [33.45, -112.07],
  "856": [32.11, -110.93], "857": [32.11, -110.93], "859": [32.11, -110.93],
  "860": [35.20, -111.66], "861": [35.20, -111.66], "863": [34.57, -112.47],
  "864": [34.55, -112.47], "865": [35.57, -108.74],
  // Colorado & Wyoming & Montana
  "800": [39.74, -104.98], "801": [39.74, -104.98], "802": [39.74, -104.98],
  "803": [39.74, -104.98], "804": [39.74, -104.98], "805": [39.74, -104.98],
  "806": [39.74, -104.98], "807": [39.74, -104.98], "808": [38.83, -104.82],
  "809": [38.83, -104.82], "810": [39.08, -108.55], "811": [37.67, -105.43],
  "812": [37.67, -105.43], "813": [37.47, -105.88], "814": [40.14, -105.10],
  "815": [40.58, -105.08], "816": [39.05, -108.55],
  "820": [41.13, -104.82], "821": [41.13, -104.82], "822": [43.07, -108.31],
  "823": [42.85, -106.32], "824": [44.29, -105.50], "825": [43.06, -110.70],
  "826": [44.80, -108.81], "827": [44.80, -108.81], "828": [45.00, -108.51],
  "829": [44.46, -108.62], "830": [43.49, -112.03], "831": [43.49, -112.03],
  // Idaho & Utah & Nevada
  "832": [43.49, -112.03], "833": [42.56, -114.48], "834": [43.88, -116.10],
  "835": [46.42, -117.04], "836": [43.61, -116.20], "837": [43.61, -116.20],
  "838": [47.65, -116.77],
  "840": [40.76, -111.89], "841": [40.76, -111.89], "842": [40.76, -111.89],
  "843": [40.76, -111.89], "844": [40.76, -111.89], "845": [40.76, -111.89],
  "846": [37.68, -113.06], "847": [37.09, -113.58],
  "890": [36.17, -115.14], "891": [36.17, -115.14], "893": [39.52, -119.81],
  "894": [39.52, -119.81], "895": [39.08, -119.77], "897": [36.17, -115.14],
  "898": [36.17, -115.14],
  // California
  "900": [34.05, -118.24], "901": [34.05, -118.24], "902": [33.74, -118.05],
  "903": [34.05, -118.24], "904": [34.05, -118.24], "905": [33.70, -118.18],
  "906": [34.05, -118.30], "907": [34.05, -118.30], "908": [33.83, -118.31],
  "910": [34.12, -118.21], "911": [34.12, -118.21], "912": [34.12, -118.21],
  "913": [33.98, -118.12], "914": [34.09, -118.10], "915": [34.07, -118.07],
  "916": [34.07, -118.06], "917": [33.80, -118.19], "918": [33.80, -118.19],
  "919": [34.18, -117.94], "920": [32.72, -117.15], "921": [32.72, -117.15],
  "922": [32.72, -117.15], "923": [32.72, -117.15], "924": [32.72, -117.15],
  "925": [33.97, -117.73], "926": [33.65, -117.87], "927": [33.65, -117.87],
  "928": [33.65, -117.87], "929": [34.50, -117.29], "930": [34.84, -120.47],
  "931": [35.37, -119.02], "932": [35.37, -119.02], "933": [35.37, -119.02],
  "934": [35.37, -119.02], "935": [35.37, -119.02], "936": [36.75, -119.77],
  "937": [36.75, -119.77], "938": [36.75, -119.77], "939": [36.60, -121.90],
  "940": [37.78, -122.42], "941": [37.78, -122.42], "942": [38.57, -121.49],
  "943": [37.41, -122.03], "944": [37.70, -122.10], "945": [37.83, -122.27],
  "946": [37.83, -122.27], "947": [37.72, -122.19], "948": [37.80, -122.26],
  "949": [37.67, -122.09], "950": [37.33, -121.89], "951": [37.33, -121.89],
  "952": [37.33, -121.89], "953": [37.43, -121.89], "954": [38.10, -122.26],
  "955": [38.10, -122.26], "956": [38.57, -121.49], "957": [38.57, -121.49],
  "958": [38.57, -121.49], "959": [40.73, -122.18], "960": [40.50, -122.37],
  "961": [40.73, -124.16],
  // Oregon
  "970": [45.52, -122.68], "971": [45.52, -122.68], "972": [45.52, -122.68],
  "973": [45.52, -122.68], "974": [42.33, -122.86], "975": [44.06, -123.09],
  "976": [44.92, -123.01], "977": [44.06, -123.09], "978": [43.30, -124.21],
  "979": [44.56, -123.26],
  // Washington State
  "980": [47.61, -122.33], "981": [47.61, -122.33], "982": [47.61, -122.33],
  "983": [47.24, -122.43], "984": [47.24, -122.43], "985": [47.04, -122.89],
  "986": [45.63, -122.67], "987": [46.60, -120.51], "988": [47.51, -120.80],
  "989": [47.51, -120.80], "990": [47.66, -117.43], "991": [47.66, -117.43],
  "992": [47.66, -117.43], "993": [46.40, -117.04], "994": [48.76, -122.48],
  // Alaska & Hawaii
  "995": [64.84, -147.72], "996": [61.22, -149.88], "997": [55.34, -131.64],
  "998": [64.50, -165.41], "999": [71.29, -156.79],
  "967": [21.30, -157.85], "968": [21.30, -157.85],
  // Puerto Rico & Territories
  "006": [18.27, -66.73], "007": [18.27, -66.73], "008": [18.38, -66.06],
  "009": [18.47, -66.11],
};

/** Haversine formula: returns distance in kilometers between two lat/lon points */
export function haversineKm(lat1: number, lon1: number, lat2: number, lon2: number): number {
  const R = 6371; // Earth radius in km
  const dLat = ((lat2 - lat1) * Math.PI) / 180;
  const dLon = ((lon2 - lon1) * Math.PI) / 180;
  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos((lat1 * Math.PI) / 180) *
      Math.cos((lat2 * Math.PI) / 180) *
      Math.sin(dLon / 2) *
      Math.sin(dLon / 2);
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
}

/**
 * Compute a proximity score (0–40) between two ZIP codes based on
 * the 3-digit prefix centroid approximation.
 *
 * Returns 0 if either ZIP is unknown or from different countries.
 */
export function zip3ProximityScore(zip1: string, zip2: string): number {
  const prefix1 = zip1.slice(0, 3);
  const prefix2 = zip2.slice(0, 3);

  const c1 = ZIP3_CENTROIDS[prefix1];
  const c2 = ZIP3_CENTROIDS[prefix2];

  if (!c1 || !c2) return 0; // Unknown region — no bonus, no penalty

  const distKm = haversineKm(c1[0], c1[1], c2[0], c2[1]);

  if (distKm <= 65)  return 40; // ~40 miles — very local
  if (distKm <= 240) return 25; // ~150 miles — regional
  if (distKm <= 650) return 10; // ~400 miles — same coast / region
  return 0;                     // far away — no proximity bonus
}
